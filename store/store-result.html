<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta charset="UTF-8" name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>商城</title>
  <link href="../style/mescroll.min.css" rel="stylesheet">
  <link href="../style/common.css" rel="stylesheet">
  <link href="../style/common-store.css" rel="stylesheet">
  <link href="../style/storeResult.css" rel="stylesheet">
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1070953_3oa7lujtq3c.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.0.2/css/swiper.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.0.2/js/swiper.min.js"></script>
  <script src="../js/mescroll.min.js"></script>
  <script src="../js/flexble.js"></script>
  <script src="../js/jquery.min.js"></script>
  <script src="../js/utils.js"></script>
</head>

<body>
  <header>
    <!-- 顶部搜索栏 -->
    <div class="store-index-search">
      <div class='input-box'>
        <input type="text" placeholder="搜索商品" />
        <span class='iconfont icon-sousuo-copy' style="color: #666666;padding-left:10px;"></span>
      </div>
    </div>
    <!-- 分类导航条 -->
    <div class="nav-box">
      <nav class='store-index-nav'>
        <a class='btn-nav selected' href="javascript:void(0)">综合排序</a>
        <a class='btn-nav' href="javascript:void(0)">销量</a>
        <a class='btn-nav price-sort' href="javascript:void(0)">
          <span>价格</span>
          <span class='sort-box'>
            <i class="iconfont icon-arr-top icon-sort"></i>
            <i class="iconfont icon-arr-down icon-sort "></i>
          </span>
        </a>
        <a class='btn-nav store-index-btn-more' href="javascript:void(0)">分类<i class="iconfont icon-arr-down"></i></a>
      </nav>
      <!-- 更多 -->
      <div class='nav-more'>
        <!-- 多套一层，样式需要 -->
        <div class='items-box'>
          <span class='nav-item-more'>电器</span>
          <span class='nav-item-more'>配饰</span>
          <span class='nav-item-more'>女装</span>
          <span class='nav-item-more'>书籍</span>
          <span class='nav-item-more'>用品办公用品办公办公用品办公</span>
          <span class='nav-item-more'>家具</span>
          <span class='nav-item-more'>家电</span>
          <span class='nav-item-more'>家电</span>
          <span class='nav-item-more'>手机</span>
          <!-- 最后两个必须要 用来占位置 -->
          <span style="visibility: hidden;"></span>
          <span style="visibility: hidden;"></span>
        </div>
      </div>
    </div>
  </header>
  <div class="content-box mescroll" id="mescroll">
    <!-- 商品列表 -->
    <div class="store-index-goods-box">
      <div class='item-goods'>
        <div class="goods-img px2rem300">
          <img src="../images/store/goods-img.png" alt="">
        </div>
        <p class='goods-title px2rem300'>欧式台灯姿矫正器防 近视坐姿快来抢购…</p>
        <p class='goods-info px2rem300'>iPhone X 64G 白色款白色…</p>
        <p class='goods-discount px2rem300'><span>可抵扣100积分</span></p>
        <div class='goods-money px2rem300'>
          <span class='money'>￥699</span>
          <span>2453条评价</span>
        </div>
      </div>
      <div class='item-goods'>
        <div class="goods-img px2rem300">
          <img src="../images/store/goods-img.png" alt="">
        </div>
        <p class='goods-title px2rem300'>欧式台灯姿矫正器防 近视坐姿快来抢购…</p>
        <p class='goods-info px2rem300'>iPhone X 64G 白色款白色…</p>
        <p class='goods-discount px2rem300'><span>可抵扣100积分</span></p>
        <div class='goods-money px2rem300'>
          <span class='money'>￥699</span>
          <span>2453条评价</span>
        </div>
      </div>
      <div class='item-goods'>
        <div class="goods-img px2rem300">
          <img src="../images/store/goods-img.png" alt="">
        </div>
        <p class='goods-title px2rem300'>欧式台灯姿矫正器防 近视坐姿快来抢购…</p>
        <p class='goods-info px2rem300'>iPhone X 64G 白色款白色…</p>
        <p class='goods-discount px2rem300'><span>可抵扣100积分</span></p>
        <div class='goods-money px2rem300'>
          <span class='money'>￥699</span>
          <span>2453条评价</span>
        </div>
      </div>
      <div class='item-goods'>
        <div class="goods-img px2rem300">
          <img src="../images/store/goods-img.png" alt="">
        </div>
        <p class='goods-title px2rem300'>欧式台灯姿矫正器防 近视坐姿快来抢购…</p>
        <p class='goods-info px2rem300'>iPhone X 64G 白色款白色…</p>
        <p class='goods-discount px2rem300'><span>可抵扣100积分</span></p>
        <div class='goods-money px2rem300'>
          <span class='money'>￥699</span>
          <span>2453条评价</span>
        </div>
      </div>
      <div class='item-goods'>
        <div class="goods-img px2rem300">
          <img src="../images/store/goods-img.png" alt="">
        </div>
        <p class='goods-title px2rem300'>欧式台灯姿矫正器防 近视坐姿快来抢购…</p>
        <p class='goods-info px2rem300'>iPhone X 64G 白色款白色…</p>
        <p class='goods-discount px2rem300'><span>可抵扣100积分</span></p>
        <div class='goods-money px2rem300'>
          <span class='money'>￥699</span>
          <span>2453条评价</span>
        </div>
      </div>
      <div class='item-goods'>
        <div class="goods-img px2rem300">
          <img src="../images/store/goods-img.png" alt="">
        </div>
        <p class='goods-title px2rem300'>欧式台灯姿矫正器防 近视坐姿快来抢购…</p>
        <p class='goods-info px2rem300'>iPhone X 64G 白色款白色…</p>
        <p class='goods-discount px2rem300'><span>可抵扣100积分</span></p>
        <div class='goods-money px2rem300'>
          <span class='money'>￥699</span>
          <span>2453条评价</span>
        </div>
      </div>
    </div>
  </div>
  <footer>

  </footer>
  <script>
    var filterData = {
      keyword: '',
      page: 1,
      pageSize: 10,
      cat_id: 10,
      sales_sum: 1,
      shop_price: '',
    }
    var mescroll;
    $(document).ready(function () {
      // 进来加载数据
      setFilterData(filterData);
      // 点击导航
      $('.store-index-nav').on('click', '.btn-nav', function () {
        var $dom = $(this)
        // 价格
        if ($dom.hasClass('price-sort')) {
          if ($dom.hasClass('up')) {
            $dom.removeClass('up');
            $dom.addClass('down');
            setFilterData({'shop_price':desc});
          } else if ($dom.hasClass('down')) {
            $dom.removeClass('down');
            $dom.addClass('up');
          } else {
            $dom.addClass('up');
          }
        } else {
          $('.btn-nav.price-sort').removeClass('down');
          $('.btn-nav.price-sort').removeClass('up');
        }
        // 分类
        if ($dom.hasClass('store-index-btn-more')) {
          if ($dom.find('.iconfont').hasClass('icon-arr-down')) {
            $('.nav-more').show();
            $dom.find('.iconfont').removeClass('icon-arr-down')
            $dom.find('.iconfont').addClass('icon-arr-top')
          } else {
            $('.nav-more').hide();
            $dom.find('.iconfont').removeClass('icon-arr-top')
            $dom.find('.iconfont').addClass('icon-arr-down')
          }
        } else {
          $('.nav-more').hide();
          $('.store-index-btn-more').find('.iconfont').removeClass('icon-arr-top')
          $('.store-index-btn-more').find('.iconfont').addClass('icon-arr-down')
        }
        // 其他
        if ($dom.hasClass('selected')) {
          return
        } else {
          $('.btn-nav.selected').removeClass('selected')
          $dom.addClass('selected')
        }
      })
      // 点击更多导航栏
      $('body').on('click', '.nav-item-more', function () {
        if ($(this).hasClass('selected')) {
          return;
        } else {
          $('.nav-item-more.selected').removeClass('selected');
          $(this).addClass('selected');
          $('.store-index-btn-more').find('.iconfont').removeClass('icon-arr-top');
          $('.store-index-btn-more').find('.iconfont').addClass('icon-arr-down');
          $('.nav-more').hide();
        }
      })
    })
    function setFilterData(dataObj) {
      filterData = Object.assign({},filterData,dataObj);
      if(mescroll){
        mescroll.destroy();
      }
      mescroll = _utils.mescroll('post', 'mobile/Goods/ajaxGoodsList', filterData, function (res) {
        filterData.page++;      
      }, false, true);
    }

    // 记录搜索历史
    function recordKeyWord(keyWord){
      _utils.recordKeyWord(keyWord);
    }
  </script>
</body>

</html>